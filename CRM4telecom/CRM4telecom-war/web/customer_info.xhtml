<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>CRM4telecom | Client #{customerBean.customer.customerId}</title>
    </h:head>
    <h:body>
               <table>
            <tr>
                <td valign="top">
                    <h:form >
                        <p:menu>
                            <p:submenu label="Navigation">
                                <p:menuitem value="To main page" url="index.xhtml"/>
                                <p:menuitem value="To client list" url="client_list.xhtml"/>
                                <p:menuitem value="To order list" url="order_list.xhtml"/>
                            </p:submenu>
                        </p:menu>
                    </h:form>
                </td>
                <td valign="top">

                    <h:form>
                        <p:tabView>
                            <p:tab title="Info">
                                <h1>Client №#{customerBean.customer.customerId}</h1>
                                <h:panelGrid columns="4">
                                    <h:panelGroup> <b><h:outputText value="Фамилия: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.lastName}"/></h:panelGroup>
                                    <h:panelGroup><b><h:outputText value="Подключен с: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.connectionDate}"/></h:panelGroup>

                                    <h:panelGroup><b><h:outputText value="Имя: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.firstName}"/></h:panelGroup>
                                    <h:panelGroup><b><h:outputText value="Баланс: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.balance}"/></h:panelGroup>

                                    <h:panelGroup><b><h:outputText value="E-mail: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.email}"/></h:panelGroup>
                                    <h:panelGroup><b><h:outputText value="Карта №: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.cardNumber}"/></h:panelGroup>

                                    <h:panelGroup><b><h:outputText value="Адрес: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="ул. #{customerBean.customer.street}, д. #{customerBean.customer.building}, кв. #{navigationBean.customer.flat}"/></h:panelGroup>
                                    <h:panelGroup> <b><h:outputText value="Дата истечения: "/></b></h:panelGroup>
                                    <h:panelGroup> <h:outputText value="#{customerBean.customer.cardExpData}"/></h:panelGroup>


                                    <h:panelGroup><b><h:outputText value="Статус: "/></b></h:panelGroup>
                                    <h:panelGroup><h:outputText value="#{customerBean.customer.status}"/></h:panelGroup>
                                </h:panelGrid>
                                <p:dataTable value="#{customerBean.customer.phoneNumberList}" var="phone">
                                    <f:facet name="header">Номера телефонов:</f:facet>
                                    <p:column>
                                        <h:outputText value="#{phone.toString}"/>
                                    </p:column>
                                </p:dataTable>


                            </p:tab>
                            <p:tab title="Edit" id="edittab">
                                <p:commandButton value="Сохранить" update="editform"/>
                                <h:form id="editform">

                                    <h:panelGrid columns="4">
                                        <h:panelGroup> <b><h:outputText value="Фамилия: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.lastName}"/></h:panelGroup>
                                        <h:panelGroup><b><h:outputText value="Подключен с: "/></b></h:panelGroup>
                                        <h:panelGroup><h:outputText value="#{customerBean.cv.connectionDate}"/></h:panelGroup>

                                        <h:panelGroup><b><h:outputText value="Имя: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.firstName}"/></h:panelGroup>
                                        <h:panelGroup><b><h:outputText value="Баланс: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.balance}"/></h:panelGroup>

                                        <h:panelGroup><b><h:outputText value="E-mail: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.email}"/></h:panelGroup>
                                        <h:panelGroup><b><h:outputText value="Карта №: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.cardNumber}"/></h:panelGroup>

                                        <h:panelGroup><b><h:outputText value="Адрес: "/></b></h:panelGroup>
                                        <h:outputLabel for="street" value="Street:" />  
                                        <p:inputText id="street" value="#{customerBean.cv.street}" label="Street"/>  
                                        <p:message for="street" />  
                                        <h:outputText value="#{customerBean.cv.street}" /> 

                                        <h:outputLabel for="building" value="Building:" />  
                                        <p:inputText id="building" value="#{customerBean.cv.building}" label="Building"/>  
                                        <p:message for="building" />  
                                        <h:outputText value="#{customerBean.cv.building}" /> 

                                        <h:outputLabel for="flat" value="Flat:" />  
                                        <p:inputText id="flat" value="#{customerBean.cv.flat}" label="Flat"/>  
                                        <p:message for="flat" />  
                                        <h:outputText value="#{customerBean.cv.flat}" /> 

                                        <h:panelGroup> <b><h:outputText value="Дата истечения: "/></b></h:panelGroup>
                                        <h:panelGroup> <p:inputText value="#{customerBean.cv.cardExpData}"/></h:panelGroup>

                                        <h:panelGroup><b><h:outputText value="Статус: "/></b></h:panelGroup>
                                        <h:panelGroup><p:inputText value="#{customerBean.cv.status}"/><br/></h:panelGroup>
                                    </h:panelGrid>
                                    <p:dataTable value="#{customerBean.cv.phoneNumberList}" var="phone">
                                        <f:facet name="header">Номера телефонов:</f:facet>
                                        <p:column>
                                            <h:outputText value="#{phone.toString}"/>
                                        </p:column>
                                    </p:dataTable>



                                </h:form>
                            </p:tab>
                            <p:tab title="IP">
                                <p:dataTable value="#{customerBean.customer.staticIpList}" var="ip">
                                    <f:facet name="header">Статические IP-адреса</f:facet>
                                    <p:column>
                                        <h:outputText value="#{ip.toString}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Orders">
                                <p:dataTable value="#{customerBean.customer.ordersList}" var="order">
                                    <f:facet name="header">Заявки</f:facet>
                                    <p:column>
                                        <p:commandLink value="#{order.orderId}" action="#{customerBean.toOrderInfo(order)}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">Статус</f:facet>
                                        <h:outputText value="#{order.status}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">Приоритет</f:facet>
                                        <h:outputText value="#{order.priority}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">Тип</f:facet>
                                        <h:outputText value="#{order.orderType}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Markets">
                                <p:dataTable value="#{customerBean.customer.marketsCustomersList}" var="market">
                                    <p:column>
                                        <f:facet name="header">ID</f:facet>
                                        <h:outputText value="#{market.marketId}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">Name</f:facet>
                                        <h:outputText value="#{market.market.name}"/>
                                    </p:column>     
                                    <p:column>
                                        <f:facet name="header">Start date</f:facet>
                                        <h:outputText value="#{market.startDate}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">End date</f:facet>
                                        <h:outputText value="#{market.endDate}"/>
                                    </p:column>     
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </h:form>
                </td>
            </tr>
        </table>
    </h:body>
</html>
